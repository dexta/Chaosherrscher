var choasherrscher=function(t,i,s,h){this.can=s,this.C={color:"#F00",size:1,width:1,state:[0]},this.P=[[400,300],[400,10],[10,590],[790,590]],this.W=t,this.H=i,this.distRange=(t+i)/30,this.defaultFactor=[.5,.33333,.375,.233],this.factor=.5,this.brain=0,this.neck=3;for(var n in h)this[n]=h[n];this.F=function(t,i){return[i[0]+(t[0]-i[0])*this.factor,i[1]+(t[1]-i[1])*this.factor]},this.pick=function(t){this.C.state.length>this.brain&&this.C.state.splice(0,1);var i=this.uniqRandom(this.C.state,1,t.length);return this.C.state.push(i),t[i]},this.notInIt=function(t,i){return-1===i.indexOf(t)},this.uniqRandom=function(t,i,s){var h=parseInt(Math.random()*(s-i)+i);return this.notInIt(h,t)?h:this.uniqRandom(t,i,s)},this.niceSetup=function(t){var i=this.W<500?this.W/23:this.W/10,s=this.H<650?this.H/23:this.H/10;if(3===t)this.P=[[this.W/2,this.H/2],[this.W/2,s],[i,this.H-s],[this.W-2*i,this.H-s]];else if(4===t){var h=this.W>this.H?this.H-2*s:this.W-2*i;i=(this.W-h)/2,s=(this.H-h)/2,this.P=[[i+h/2,s+h/2],[i,s],[i+h,s],[i,s+h],[i+h,s+h]]}else 5===t?this.P=[[this.W/2,this.H/2],[this.W/2,s],[2*i,this.H/3],[this.W-2*i,this.H/3],[3*i,this.H-s],[this.W-3*i,this.H-s]]:6===t&&(this.P=[[this.W/2,this.H/2],[this.W/2,s],[2*i,this.H/4],[this.W-2*i,this.H/4],[2*i,this.H-this.H/4],[this.W-2*i,this.H-this.H/4],[this.W/2,this.H-s]])},this.setFunction=function(t){this.F=t},this.setPick=function(t){this.pick=t},this.setFactor=function(t){this.factor=t},this.setBrain=function(t){this.brain=t},this.setNeck=function(t){this.neck=t},this.getConfig=function(){return{neck:this.neck,teil:this.teil,brain:this.brain}},this.setConfig=function(t){for(var i in t)this[i]=t[i];return this.getConfig()},this.next=function(){var t=this.pick(this.P),i=this.F(this.P[0],t);this.drawPoint(i[0],i[1]),this.P[0]=i},this.drawMassive=function(t){for(var i=new Date/1,s=0;s<t;s++)this.next();this.lastMassive=new Date/1-i},this.colorStart=function(){this.drawPoint(this.P[0][0],this.P[0][1]);for(var t=1,i=this.P.length;t<i;t++)this.drawPoint(this.P[t][0],this.P[t][1],"#0F0",5,5)},this.drawPoint=function(t,i,s,h,n){this.can.beginPath(),this.can.lineWidth=n||this.C.width,this.can.strokeStyle=s||this.C.color;var a=h||this.C.size;this.can.arc(t,i,a,0,2*Math.PI),this.can.stroke()},this.goSetup=function(t){if(t){if("random"===t){var i=this.randomNice([[this.W/2,this.H/2]],0);i?this.P=i:(this.distRange-=.1*this.distRange,console.log("let retry it "+this.distRange),this.goSetup(t))}}else this.niceSetup(this.neck);this.clearCanvas(),this.colorStart(),console.log("eck:"+this.neck+" factor:"+this.factor+" brain:"+this.brain)},this.randomNice=function(t,i){if((i=++i||1)>=50)return null;var s=parseInt(Math.random()*this.W),h=parseInt(Math.random()*this.H);for(var n in t){var a=t[n][0]-s>0?2*(t[n][0]-s):2*(s-t[n][0]),e=t[n][1]-h>0?2*(t[n][1]-h):2*(h-t[n][1]);if(Math.sqrt(a+e)<this.distRange)return this.randomNice(t,i)}return t.push([s,h]),t.length>this.neck?t:this.randomNice(t,0)},this.clearCanvas=function(){this.can.clearRect(0,0,this.W,this.H)}};
function menuAction(t,n){"point"===t&&(C.niceSetup(n),C.clearCanvas(),C.colorStart(),$("#menu_points").html(n))}$(function(){$("[data-btn]").on("click",function(t){var n=$(this).data();if(t.stopPropagation(),"runButton"===n.btn)howM=parseInt($("#runCount").val()),C.drawMassive(howM);else if("optionButton"===n.btn)$("#optionz").toggle();else if("art"===n.btn){var a=n.val.split("-"),e={neck:parseInt(a[0]),teil:parseInt(a[1]),brain:parseInt(a[2]),art:n.val};console.dir(e),C.setNeck(e.neck),C.setBrain(e.brain),C.setFactor(C.defaultFactor[a[1]]),setOptionView(e),C.goSetup()}else"neck"===n.btn?C.setNeck(n.val):"teil"===n.btn?C.setFactor(C.defaultFactor[n.val]):"brain"===n.btn?C.setBrain(n.val):"create"===n.btn&&("nice"===n.val?C.goSetup():"random"===n.val&&C.goSetup("random"));var o={};o[n.btn]=n.val,setOptionView(o)})});
function setOptionView(t){t||(t=C.getConfig()),$("[data-btn]").each(function(n,e){for(var i in t)i===$(e).data("btn")&&(t[i]===$(e).data("val")?($(e).find(".text-success").show(),$(e).find(".text-info").hide()):($(e).find(".text-success").hide(),$(e).find(".text-info").show()))})}var HEIGHT=0,WIDHT=0,C={},ctx={};$(function(){var t=$("#canContainer");HEIGHT=10*parseInt(t.height()/10),WIDHT=10*parseInt(t.width()/10);var n=$("#canvas");ctx=n[0].getContext("2d"),ctx.canvas.height=HEIGHT,ctx.canvas.width=WIDHT,console.log(n.height()+" - "+n.width()),setOptionView({art:"3-1-0"}),C=new choasherrscher(WIDHT,HEIGHT,ctx,{neck:3,brain:0,teil:0}),C.goSetup(),setOptionView()});